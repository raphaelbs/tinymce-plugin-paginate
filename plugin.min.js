!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";a("./src/main")},{"./src/main":8}],2:[function(a,b,c){"use strict";function d(a){this._testDPIElement=null,this.document=a,this._setScreenDPI()}var e=function(){return $("#dpi-test")[0]?void(this._testDPIElement=$("#dpi-test")):(this._testDPIElement=$("<div/>").attr("id","dpi-test").css({position:"absolute",top:"-100%",left:"-100%",height:"1in",width:"1in",border:"red 1px solid"}),void $("body").prepend(this._testDPIElement))};d.prototype._setScreenDPI=function(){if(e.call(this),this._testDPIElement[0].offsetWidth!==this._testDPIElement[0].offsetHeight)throw new Error("FATAL ERROR: Bad Screen DPI !");this.screenDPI=this._testDPIElement[0].offsetWidth},d.prototype.height=function(a){if(!a)throw new Error("Explicit unit for getting document height is required");var b=$("body",this.document).height();return"px"===a?b:"mm"===a?this.px2mm(b):void 0},d.prototype.px2mm=function(a){if(!this.screenDPI)throw new Error("Screen DPI is not defined. Is Display object instantied ?");return 25.4*a/this.screenDPI},d.prototype.mm2px=function(a){if(!this.screenDPI)throw new Error("Screen DPI is not defined. Is Display object instantied ?");return a*this.screenDPI/25.4},b.exports=d},{}],3:[function(a,b,c){"use strict";function d(a,b,c,d,f){this._content=null,this.rank=null,this._editor=f,this._display=new e(f.getDoc());var g=Math.ceil(Number(this._display.mm2px(10))-1);this.spacingsWithHeaders={page:{pTop:2.9*g,pRight:g,pBottom:2.2*g,pLeft:g,sumHeight:function(){return this.pTop+this.pBottom},sumWidth:function(){return this.pRight+this.pLeft}}},this.spacingsWithHeaders.header={pTop:Math.ceil(g/2.2),pBottom:Math.ceil(g/2.2),mBottom:Math.ceil(g/2),mRight:this.spacingsWithHeaders.page.pRight,mLeft:this.spacingsWithHeaders.page.pLeft,sumHeight:function(){return this.pTop+this.pBottom+this.mBottom+1}},this.spacingsWithHeaders.header.height=this.spacingsWithHeaders.page.pTop-this.spacingsWithHeaders.header.sumHeight(),this.spacingsWithHeaders.addInfo={height:this.spacingsWithHeaders.header.height+1.7*g},this.spacingsWithHeaders.footer={pTop:Math.ceil(g/3),mRight:this.spacingsWithHeaders.page.pRight,pBottom:Math.ceil(g/2),mLeft:this.spacingsWithHeaders.page.pLeft,mTop:Math.ceil(g/2),sumHeight:function(){return this.pTop+this.pBottom+this.mTop+1}},this.spacingsWithHeaders.footer.height=this.spacingsWithHeaders.page.pBottom-this.spacingsWithHeaders.footer.sumHeight(),this.spacingsWithoutHeaders={page:{pTop:3*g,pRight:g,pBottom:2*g,pLeft:g,sumHeight:function(){return this.pTop+this.pBottom},sumWidth:function(){return this.pRight+this.pLeft}}},this.format(a),this.orientate(b),void 0!==c&&(this.rank=c),(void 0!==d||null!==d)&&this.content(d),c&&this.setHeadersAndFooters()}var e=a("./Display"),f=a("../utils/page-formats"),g=function(){function a(a){this.name="InvalidOrientationLabelError",this.message=a+" is an invalid orientation label !",this.stack=(new Error).stack}return a.prototype=Error.prototype,a.prototype.name="InvalidOrientationLabelError",a}();d.prototype.MARGIN_Y=16,d.prototype.content=function(a){return a?void(this._content=a):this._content},d.prototype.innerContent=function(){return this._content?$(this._content).children(":not(.pageFooter):not(.pageHeader):not(.pageAddData)"):void 0},d.prototype.setHeadersAndFooters=function(){function a(a){return a.preventDefault(),!1}function b(a){a.onselectstart=function(){return!1},$(a).css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})}function c(a,b){var c=f._editor.settings.paginate_configs();if(c&&c.headerHtml){if("function"!=typeof c.headerHtml)throw Error('[tinymce~paginate] configuration "paginate_configs.headerHtml" should be [function] but is ['+typeof c.headerHtml+"]");c.headerHtml(a,b)}}function d(a,b){var c=f._editor.settings.paginate_configs();if(c&&c.footerHtml){if("function"!=typeof c.footerHtml)throw Error('[tinymce~paginate] configuration "paginate_configs.footerHtml" should be [function] but is ['+typeof c.footerHtml+"]");c.footerHtml(a,b,f.rank)}}function e(a,b){var c=f._editor.settings.paginate_configs();if(c&&c.addInfoHtml){if("function"!=typeof c.addInfoHtml)throw Error('[tinymce~paginate] configuration "paginate_configs.addInfoHtml" should be [function] but is ['+typeof c.addInfoHtml+"]");c.addInfoHtml(a,b,f.rank)}}var f=this,g=f._editor.settings.paginate_configs();if(g){var h=f.spacingsWithHeaders,i=f.spacingsWithoutHeaders,j=Math.ceil(Number(this._display.mm2px(10))-1),k=$(f._content).find(".pageHeader,.pageFooter,.pageAddData").remove();g.margemSuperior&&(i.page.pTop=f._display.mm2px(10*g.margemSuperior)),g.margemInferior&&(i.page.pBottom=f._display.mm2px(10*g.margemInferior));var l={top:i.page.pTop,right:i.page.pRight,bottom:i.page.pBottom,left:i.page.pLeft,minHeight:Math.floor(f.getInnerHeight())},m=g.possuiCabecalhoRodape||k.length>0&&g.headerHtml&&g.possuiCabecalhoRodape!==!1,n=g.possuiDadosPaciente,o=document.createElement("div");o.className="pageHeader",o.contentEditable=!1,o.onmousedown=a,o.style.width=$(f._content).width()+"px",o.style.height=Math.ceil(l.top-j/2)+"px",o.style.marginRight=h.header.mRight+"px",o.style.marginLeft=h.header.mLeft+"px",o.style.position="absolute",o.style.top=0,o.style.left=0,o.style.borderBottom="1px dashed #ddd",o.style.color="#8d8e90",b(o);var p=document.createElement("div");p.className="pageAddData",p.contentEditable=!1,p.onmousedown=a,p.style.width=$(f._content).width()+"px",p.style.height=h.addInfo.height+"px",p.style.marginRight=h.header.mRight+"px",p.style.marginLeft=h.header.mLeft+"px",p.style.position="absolute",p.style.top=l.top-j/2+"px",p.style.left=0,p.style.borderBottom="1px solid #ddd",p.style.color="#8d8e90",b(p);var q=document.createElement("div");q.className="pageFooter",q.contentEditable=!1,q.onmousedown=a,q.style.width=$(f._content).width()+"px",q.style.height=Math.ceil(l.bottom-j/2)+"px",q.style.marginRight=h.footer.mRight+"px",q.style.marginLeft=h.footer.mLeft+"px",q.style.position="absolute",q.style.bottom=0,q.style.left=0,q.style.borderTop="1px dashed #ddd",q.style.color="#8d8e90",b(q),m&&($(o).addClass("large"),o.style.height=h.header.height+"px",o.style.paddingTop=h.header.pTop+"px",o.style.paddingBottom=h.header.pBottom+"px",o.style.borderBottom="1px solid #ddd",p.style.top=h.header.height+h.header.pTop+h.header.pBottom+"px",$(q).addClass("large"),q.style.height=h.footer.height+"px",q.style.paddingTop=h.footer.pTop+"px",q.style.paddingBottom=h.footer.pBottom+"px",q.style.borderTop="1px solid #ddd",l.top=h.page.pTop,l.right=h.page.pRight,l.bottom=h.page.pBottom,l.left=h.page.pLeft),n&&(l.top+=h.addInfo.height),c(o,m),d(q,m),e(p,n),$(f._content).css({"padding-top":l.top+"px ","padding-right":l.right+"px ","padding-bottom":l.bottom+"px ","padding-left":l.left+"px",height:l.minHeight+"px","min-height":l.minHeight+"px","max-height":l.minHeight+"px"}).prepend(o).append(q),n&&$(o).before(p)}},d.prototype.contentIsEmpty=function(){var a=this.innerContent(),b=0;return a&&(b+=a.text().replace(/\r?\n|\r/gim).replace(/^\s*$/gim,"").length),0===b},d.prototype.clean=function(){if(this._content){var a=$(this._content).find(".pageFooter,.pageHeader,.pageAddData").detach();$(this._content).html(a)}},d.prototype.append=function(a){var b=this._editor.settings.paginate_configs();return b&&b.possuiCabecalhoRodape?$(a).insertBefore($(this.content()).find(".pageFooter")):$(a).appendTo(this.content()),this},d.prototype.prepend=function(a){var b=this._editor.settings.paginate_configs();return b&&b.possuiCabecalhoRodape?$(a).insertAfter($(this.content()).find(".pageHeader")):$(a).prependTo(this.content()),this},d.prototype.getFirstElement=function(){var a=this._editor.settings.paginate_configs(),b=$(this.content()).contents();return a&&a.possuiCabecalhoRodape?b[1]:b[0]},d.prototype.getLastElement=function(){var a=this._editor.settings.paginate_configs(),b=$(this.content()).contents();return a&&a.possuiCabecalhoRodape?b[b.length-2]:b[b.length-1]},d.prototype.orientate=function(a){var b="string"!=typeof a,c="portrait"!==a.toLowerCase()&&"paysage"!==a.toLowerCase();if(b||c)throw new g(a);this.orientation=a,"portrait"===a?(this.width=this.format()["short"],this.height=this.format()["long"]):(this.width=this.format()["long"],this.height=this.format()["short"])},d.prototype.format=function(a){if(void 0!==a){if(!f[a])throw new Error("Format "+a+" is not supported yet.");return this._format=f[a],this}return this._format},d.prototype.getDefaultHeight=function(){var a=Number(this._display.mm2px(this.height));return Math.ceil(a-5)},d.prototype.getDefaultWidth=function(){var a=Number(this._display.mm2px(this.width));return Math.ceil(a-1)},d.prototype.getInnerHeight=function(){var a=this._editor.settings.paginate_configs(),b=a&&a.possuiCabecalhoRodape?this.spacingsWithHeaders.page.sumHeight():this.spacingsWithoutHeaders.page.sumHeight();return a.possuiDadosPaciente&&(b+=this.spacingsWithHeaders.addInfo.height),this.getDefaultHeight()-b},d.prototype.getInnerWidth=function(){var a=this._editor.settings.paginate_configs(),b=a&&a.possuiCabecalhoRodape?this.spacingsWithHeaders.page.sumWidth():this.spacingsWithoutHeaders.page.sumWidth();return this.getDefaultWidth()-b},d.prototype.getRealHeight=function(){var a=$(this.content()).css("height"),b=a.split("px").join("");return Number(b)},d.prototype.getAvailableHeight=function(){var a=this.getDefaultHeight(),b=this.getContentHeight(),c=a-b;return c},d.prototype.getContentHeight=function(){var a=this.getLastElement(),b={offsetTop:a.offsetTop,height:Number($(a).css("height").split("px").join("")),margin:Number($(a).css("margin-bottom").split("px").join("")),border:Number($(a).css("border-bottom-width").split("px").join("")),sum:function(){return this.offsetTop+this.height+this.border+this.margin}},c=Number($(this.content()).css("padding-bottom").split("px").join("")),d=c+b.sum();return d},b.exports=d},{"../utils/page-formats":9,"./Display":2}],4:[function(a,b,c){"use strict";function d(a,b,c){this._pages=[],this._editor=c,this._editor.settings.paginate_configs||(this._editor.settings.paginate_configs=function(){return null}),this._document=c.getDoc(),this._display=new e(this._document),this._defaultPage=new f(a,b,null,null,c),this._body=this._document.getElementsByTagName("body"),this._previousBodyOffSetTop=0,this._previousBookmark=null;var d=this;this._editor.on("BeforeExecCommand",function(a){var b=a.command;("undo"===b||"redo"===b)&&(d._previousBookmark=d._editor.selection.getBookmark(2,!0))}),this._watchPage=new g(this)}var e=a("./Display"),f=a("./Page"),g=(a("./paginator/parser"),a("./WatchPage")),h=a("./paginator/errors"),i=h.InvalidPageRankError,j=h.InvalidFocusedRangeError,k=(h.InvalidPageHeightError,h.InvalidCursorPosition);d.prototype.destroy=function(){this._pages=null,this._editor=null,this._document=null,this._display=null,this._defaultPage=null,this._body=null,this._watchPage=null},d.prototype.CURSOR_POSITION={ORIGIN:"ORIGIN",END:"END"},d.prototype.init=function(){var a=this;a._previousNodeOffsetTop=0,a.initPages(),$(a._document.body).css("min-width",a._defaultPage.getDefaultWidth()),a._editor.settings.paginate_set_default_height&&$(a._editor.iframeElement).css("height",a._defaultPage.getDefaultHeight()+4*this._defaultPage.MARGIN_Y),a.setInitialSnapshot(),a._editor.undoManager.clear(),a._isWatchingPage=!1},d.prototype.contentIsEmpty=function(){var a=!0;return $.each(this.getPages(),function(b,c){a=c.contentIsEmpty()}),a},d.prototype.createNextPage=function(a,b){var c=b||this.getCurrentPage(),d=c?c.rank+1:1,e=l.call(this,d);return a&&$(a).appendTo(e),m.call(this,e[0],d)},d.prototype.currentContent=function(){var a="";return $.each(this.getPages(),function(b,c){var d=$("<div>").html(c.innerContent().clone());c=d.html(),c&&(a+=c)}),a},d.prototype.getCurrentPage=function(){return this.getFocusedPage()},d.prototype.getFocusedPage=function(){var a,b;try{var c;return b=n.call(this),c=$(b).attr("data-paginator-page-rank"),a=this.getPage(c)}catch(d){return null}},d.prototype.getPage=function(a){try{a=Number(a)}catch(b){throw new i(a)}if(!this._pages.length)throw new Error("Paginator pages length in null. Can't iterate on it.");var c,d=0>a-1,e=a-1>this._pages.length;if(d||e)throw new i(a);return $.each(this._pages,function(b,d){d.rank===a&&(c=d)}),c},d.prototype.getPages=function(){return this._pages},d.prototype.getPrevious=function(){try{return this.getPage(this.getCurrentPage().rank-1)}catch(a){return null}},d.prototype.getNext=function(){try{return this.getPage(this.getCurrentPage().rank+1)}catch(a){return null}},d.prototype.gotoBeginning=function(){var a,b;try{var c;b=n.call(this),c=$(b).attr("data-paginator-page-rank"),a=this.getPage(c)}catch(d){a=this.getPage(1)}finally{this.gotoPage(a,this.CURSOR_POSITION.END)}},d.prototype.gotoFocusedPage=function(){var a,b;try{var c;b=n.call(this),c=$(b).attr("data-paginator-page-rank"),a=this.getPage(c)}catch(d){a=this.getPage(1),b=a.content(),this._editor.selection.select(b,!0)}finally{this.gotoPage(a,this.CURSOR_POSITION.END)}},d.prototype.gotoNext=function(a){var b=this.getNext();return a=a||this.CURSOR_POSITION.END,b?this.gotoPage(b,a):null},d.prototype.gotoPage=function(a,b){function c(){function b(a,c,d){var e=a.childNodes;if(c=c?c:3,d=d?d:[],a.nodeType===c&&d.push(a),e)for(var f=0;f<e.length;f++)d=b(e[f],c,d);return d}var c,d,e,f,h;c=a.content(),d=c.length?c[0].lastChild:c.lastChild,d?(e=b(d),e.length?(f=e[e.length-1],h=f.textContent.length):(f=d,h=0)):(f=c,h=0),g._editor.selection.setCursorLocation(f,h)}function d(){var b,c;b=a.content(),c=b.firstChild,g._editor.selection.setCursorLocation(c,0)}function e(a){for(var b=a;;){if(3===b.nodeType||$(b).attr("data-mce-bogus"))break;b=$(b).contents().last()[0]}g._editor.selection.setCursorLocation(b,b.textContent.length||0)}var f,g=this,h=(this.getPage(a.rank).content(),this.getCurrentPage());if(h&&(f=this.getPage(h.rank).content()),!a)throw new Error("Cant navigate to undefined page");if(a!==h){if("object"==typeof b)e(b);else if(b===this.CURSOR_POSITION.ORIGIN)d();else if(b===this.CURSOR_POSITION.END)c();else{if(void 0!==b)throw console.error("InvalidCursorPosition"),new k(b);console.error("no valid cursor position"),console.log(b)}this._editor.focus(),this._editor.dom.fire(this._editor.getDoc(),"PageChange",{fromPage:h,toPage:a,timestamp:(new Date).getTime()})}},d.prototype.gotoPrevious=function(a){var b=this.getPrevious();return a=a||this.CURSOR_POSITION.END,b?this.gotoPage(b,a):null},d.prototype.initPages=function(){function a(){return $("div[data-paginator-page-rank]",b._body)}var b=this,c=a();if(b._pages=[],c.length)$.each(c,function(a,c){var d=new f(b._defaultPage.format().label,b._defaultPage.orientation,a+1,c,b._editor);b._pages.push(d)});else{var d=$(b._body).find("p").detach();b.createNextPage(d)}},d.prototype.isDirty=function(){return this._initial_snapshot!=this.currentContent()},d.prototype.isEmpty=function(){var a="";return $.each(this.getPages(),function(b,c){a+=c.content().innerText}),!a.replace(/\r?\n|\r/gim,"")},d.prototype.isWatchingPage=function(){return this._isWatchingPage},d.prototype.removePage=function(a){var b=this;$.each(b.getPages(),function(c,d){return d.rank===a.rank?($(a.content()).remove(),b.getPages().splice(c,1),!1):void 0})},d.prototype.saveScrollPosition=function(){this._previousBodyOffSetTop=this._document.documentElement.scrollTop,this._previousBodyOffSetLeft=this._document.documentElement.scrollLeft},d.prototype.setInitialSnapshot=function(){this._initial_snapshot=this.currentContent()},d.prototype.toggleHeadersAndFooters=function(){var a=this;$.each(this.getPages(),function(a,b){b.setHeadersAndFooters()}),a.watchPage()},d.prototype.toggleHeaderAdditionalData=function(){var a=this;$.each(this.getPages(),function(a,b){b.setHeadersAndFooters()}),a.watchPage()},d.prototype.updatePages=function(){for(var a=this,b=a._body.tinymce.children,c=0;c<b.length;c++)try{var d=a.getPage(c+1);d.content(b[c])}catch(e){m.call(a,b[c],c+1)}a._pages.splice(b.length),a.toggleHeadersAndFooters()},d.prototype.updateScrollPosition=function(a){var b=this,c=b._editor.selection.getSel().anchorNode;c=c.className&&c.className.contains("pageFooter")?c.previousElementSibling:c,c=c.className&&c.className.contains("pageHeader")?c.nextElementSibling:c;var d=1===c.nodeType?c:c.parentNode,e=o(d,"preventdelete",0,"offsetTop"),f=(o(d,"preventdelete",0,"offsetLeft"),$(d).outerHeight(!0)),g=Math.ceil($(b._editor.iframeElement).height()),h=(Math.ceil($(b._editor.iframeElement).width()),b._previousBodyOffSetTop),i=(b._previousBodyOffSetLeft,this._document.documentElement.scrollTop);this._document.documentElement.scrollLeft;!function(){if(!a){if(e>=h&&h+g>e+f)return b._previousNodeOffsetTop=e,void(h!==i&&(b._document.documentElement.scrollTop=h));var c=h>e?0:g-f;b._document.documentElement.scrollTop=e-c,b._previousNodeOffsetTop=e}}(),function(){if(a){if(e>=i&&i+g>e+f)return void(b._previousNodeOffsetTop=e);var c=i>e?0:g-f;b._document.documentElement.scrollTop=e-c,b._previousNodeOffsetTop=e}}()},d.prototype.watchPage=function(){this.isWatchingPage()||this._watchPage.watch()};var l=function(a){var b=Math.floor(this._defaultPage.getInnerHeight()),c=$("<div>").attr({"data-paginator":!0,"data-paginator-page-rank":a}).css({margin:this._defaultPage.MARGIN_Y+"px auto","min-height":b,"max-height":b,height:b,"max-width":this._defaultPage.getInnerWidth(),"min-width":this._defaultPage.getInnerWidth(),width:this._defaultPage.getInnerWidth()}).addClass("preventdelete");return c},m=function(a,b){var c=new f(this._defaultPage.format().label,this._defaultPage.orientation,b,a,this._editor);return this._pages.push(c),$(c.content()).appendTo(this._body),c},n=function(){var a,b,c,d=this._editor.selection.getRng();if(b=d.startContainer,c=$(b).closest('div[data-paginator="true"]'),!c.length)throw new j;return a=c[0]},o=function(a,b,c,d){return a?(d||(d="offsetTop"),c||(c=0),c+=a[d],a.offsetParent&&a.offsetParent.className&&a.offsetParent.className.contains(b)?c+a.offsetParent[d]:o(a.parentNode,b,c)):0};c=b.exports=d,c.errors=h},{"./Display":2,"./Page":3,"./WatchPage":5,"./paginator/errors":6,"./paginator/parser":7}],5:[function(a,b,c){"use strict";function d(a){this.paginator=a}function e(){var a=this;$(a.paginator._body).find(".c-split.c-left").each(function(b,c){$(c).removeClass("c-split"),$(c).removeClass("c-left");var d=$(a.paginator._body).find(".c-split.c-right."+c.className),e=$(d).text();$(c).removeClass(c.className),$(c).append(" "+e),$(d).remove()})}function f(a,b){var c=0,d=1,e=this;$.each(e.paginator.getPages(),function(e,f){f.innerContent().each(function(e,f){var g=Number($(f).css("margin-top").split("px").join("")),h=(Number($(f).css("margin-bottom").split("px").join("")),$(f).outerHeight()+g),i={height:h,html:$(f).detach(),rank:d};a.push(i),c+i.height>b&&(c=0,d++,i.rank=d),c+=i.height})})}d.prototype.watch=function(){var a=[],b=this.paginator;b._editor.settings.paginate_configs();b._isWatchingPage=!0;var c=b._previousBookmark||b._editor.selection.getBookmark();b._previousBookmark=null,b.saveScrollPosition();var d=b._pages[0].getInnerHeight();e.call(this),f.call(this,a,d);for(var g,h=1,i=b.getPage(1);void 0!==(g=a.shift());)h!==g.rank&&(h=g.rank,i=b.getPage(g.rank),i||(i=b.createNextPage(void 0,g.rank>1?b.getPage(g.rank-1):void 0))),i.append(g.html);$.each(b.getPages(),function(a,c){return c&&!c.innerContent().length?b.removePage(c):void 0}),b._editor.selection.moveToBookmark(c);var j=b._editor.selection.getSel().anchorNode;j.className&&j.className.contains("pageFooter")?c.start[1]--:j.className&&j.className.contains("pageHeader")&&c.start[1]++,b._editor.selection.moveToBookmark(c),b.updateScrollPosition(),b._editor.undoManager.add(),b._isWatchingPage=!1},b.exports=d},{}],6:[function(a,b,c){"use strict";function d(a){this.name="InvalidPageRankError",this.message=a+" is an invalid page rank",this.stack=(new Error).stack}function e(){this.name="InvalidFocusedRangeError",this.message="The text cursor if out of any page.",this.stack=(new Error).stack}function f(a){this.name="InvalidPageHeightError",this.message=a+"px is an invalid page height.",this.stack=(new Error).stack}function g(a){this.name="InvalidCursorPosition",this.message=a+"is an invalid cursor position.",this.stack=(new Error).stack}d.prototype=Error.prototype,d.prototype.name="InvalidPageRankError",e.prototype=Error.prototype,e.prototype.name="InvalidFocusedRangeError",f.prototype=Error.prototype,f.prototype.name="InvalidPageHeightError",g.prototype=Error.prototype,g.prototype.name="InvalidCursorPosition",b.exports={InvalidPageRankError:d,InvalidFocusedRangeError:e,InvalidPageHeightError:f,InvalidCursorPosition:g}},{}],7:[function(a,b,c){"use strict";b.exports={}},{}],8:[function(a,b,c){"use strict";function d(a){function b(b){f.updatePageRankInput(b.toPage.rank),a.nodeChanged()}function c(b){function c(a){return a.textContent.replace(/\r?\n|\r/gim,"")}function e(a){return $(a).children(":not(.pageFooter):not(.pageHeader):not(.pageAddData)")}function f(b,c){return b.childNodes&&b.childNodes.length>0?3===b.childNodes[0].nodeType?a.selection.setCursorLocation(b.childNodes[0],c):f(b.childNodes[0],c):a.selection.setCursorLocation(b,c)}function g(e,g){if(g&&("Range"===k.type||a.plugins.paginate.isEmpty()||"BODY"===i.nodeName)&&l&&3!==l.commonAncestorContainer.nodeType&&(e&&(b.preventDefault(),b.stopPropagation()),l.startContainer!==l.endContainer||l.startOffset!==l.endOffset)){for(var h=document.createTreeWalker(l.commonAncestorContainer,NodeFilter.SHOW_ALL,{acceptNode:function(a){return a.className&&a.className.contains("page")?NodeFilter.FILTER_REJECT:a.className&&a.className.contains("preventdelete")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}}),j=[];h.nextNode()&&(0===j.length&&h.currentNode!==l.startContainer||(j.push(h.currentNode),h.currentNode!==l.endContainer)););var m=j.shift();m.textContent=c(m).substr(0,l.startOffset);var n=c(m).length,o=j.pop();l.endOffset<c(l.endContainer).length&&(o.textContent=c(o).length>0&&c(o).substr(l.endOffset)||"",m.textContent+=c(o)),o.remove(),j.forEach(function(a){try{a.remove()}catch(b){}}),3===m.nodeType&&(m=m.parentNode),0===m.children.length&&m.appendChild(document.createElement("br")),f(m,n),d.watchPage(),e&&a.save()}}function h(a,g,h){function i(a){return a?a.className.contains("page")?!0:!1:!0}function l(a){a&&(b.preventDefault(),b.stopPropagation())}if(!(0>a)){var m,n,o,p=!1,q=function v(a){return a.parentNode.className&&a.parentNode.className.contains("preventdelete")?a:v(a.parentNode)}(k.anchorNode);if(1===a?o=i(q.previousElementSibling):2===a&&(o=i(q.nextElementSibling)),!o){if(g)return l(!1);if(h)if(1===a&&0===k.anchorOffset){var r=c(q.previousElementSibling).length;r=Math.max(r,0),f(q.previousElementSibling,r),p=!0}else 2===a&&c(q).length===k.anchorOffset&&(f(q.nextElementSibling,0),p=!0);return d.updateScrollPosition(!0),l(p)}if(1===a?m=j.previousElementSibling:2===a&&(m=j.nextElementSibling),!m){if(n=e(j),1===a){if(n[0]===q)return 0!==k.focusOffset&&f(q,0),l(!0)}else if(2===a&&n[n.length-1]===q){if(c(n[n.length-1]).length!==k.anchorOffset){var s=c(q).length;s=Math.max(s,0),f(q,s)}return l(!0)}return l(!1)}var t=e(m);if(g){if(n=e(j),1===a){if(0===k.focusOffset&&n[0]===q)return t[t.length-1].textContent+=c(n[0]),n[0].remove(),f(t[t.length-1],c(t[t.length-1]).length),d.watchPage(),l(!0)}else if(2===a&&c(q).length===k.anchorOffset&&n[n.length-1]===q)return n[n.length-1].textContent+=c(t[0]),t[0].remove(),f(n[n.length-1],c(n[n.length-1]).length),d.watchPage(),l(!0);return l(!1)}if(h)return n=e(j),1===a&&0===k.anchorOffset&&(f(t[t.length-1],c(t[t.length-1]).length),p=!0),2===a&&k.anchorOffset>=c(n[0]).length&&(f(t[0],0),p=!0),d.updateScrollPosition(!0),l(p);if(1===a){var u=c(t[t.length-1]).length;u=Math.max(u,0),f(t[t.length-1],u)}return 2===a&&f(t[0],0),d.updateScrollPosition(!0),l(!0)}}var i=a.selection.getNode(),j="BODY"!==i.nodeName?$(i).closest('div[data-paginator="true"]')[0]:$(i.firstChild),k=a.selection.getSel(),l="Range"===k.type?a.selection.getRng():null,m=0;switch(b.keyCode){case 37:case 38:m=1;case 39:case 40:m||(m=2);case 8:m||(m=1);case 46:if(m||(m=2),!b.ctrlKey||!b.shiftKey){l?g(!0,8===b.keyCode||46===b.keyCode):h(m,8===b.keyCode||46===b.keyCode,37===b.keyCode||39===b.keyCode);break}case 86:break;case 88:b.ctrlKey&&g(!0);break;case 27:a.plugins.fullscreen.isFullscreen()&&a.execCommand("mceFullScreen");break;case 13:setTimeout(function(){d.watchPage()},0);default:if(!b.ctrlKey||!b.shiftKey){var n=b.keyCode>47&&b.keyCode<58||32==b.keyCode||13==b.keyCode||b.keyCode>64&&b.keyCode<91||b.keyCode>95&&b.keyCode<112||b.keyCode>185&&b.keyCode<193||b.keyCode>218&&b.keyCode<223;n&&g(!1)}}}var d,g=!1,h=0,i=!1;this.disableWatchPage=function(){i=!1},this.enableWatchPage=function(){i=!0},this.getCurrentPage=function(){return d.getCurrentPage()},this.isEmpty=function(){return d.isEmpty()},this.isDirty=function(){return d.isDirty()},this.contentIsEmpty=function(){return d.contentIsEmpty()},this.getCurrentContent=function(){return d.currentContent()},a.once("init",function(){d=new e("A4","portrait",a),a.dom.bind(a.getDoc(),"PageChange",b),a.shortcuts.remove("meta+a"),navigator&&navigator.userAgent&&navigator.userAgent.match(/iPhone/)&&(a.contentAreaContainer.style.webkitOverflowScrolling="touch",a.contentAreaContainer.style.overflow="scroll"),d.init(),g=!0,i=!0,d.gotoBeginning(),a.settings.paginate_navigation_buttons&&f.appendNavigationButtons(d)}),a.on("remove",function(a){f.removeNavigationButtons(),clearTimeout(j),h=0,g=!1});var j,k=100;a.on("change",function(a){a.preventDefault(),g&&i&&!d.isWatchingPage()&&(clearTimeout(j),j=setTimeout(function(){d.watchPage()},k))}),a.on("keydown",function(a){c(a)}),a.on("SetContent",function(a){d&&!d.isWatchingPage()&&d.updatePages()}),a.on("ToggleHeadersAndFooters",function(a){d.toggleHeadersAndFooters()}),a.on("ToggleMargins",function(a){d.toggleHeadersAndFooters()}),a.on("ToggleHeaderAdditionalData",function(a){d.toggleHeaderAdditionalData()})}var e=a("./classes/Paginator"),f=a("./utils/ui");e.errors.InvalidPageHeightError;tinymce.PluginManager.add("paginate",d)},{"./classes/Paginator":4,"./utils/ui":10}],9:[function(a,b,c){"use strict";function d(a,b,c){this.label=a,this["long"]=b,this["short"]=c}var e={A4:{"long":"297","short":"210"}},f=[];$.each(e,function(a,b){f[a]=new d(a,b["long"],b["short"])}),b.exports=f},{}],10:[function(a,b,c){"use strict";c.appendNavigationButtons=function(b){function c(c){var d,e=c.target.valueAsNumber,f=b.getCurrentPage().rank;if(e!==f)try{d=b.getPage(e),b.gotoPage(d)}catch(g){if(!(g instanceof a("../classes/paginator/errors").InvalidPageRankError))throw g;window.alert("Il n'y a pas de page #"+e),console.log($(this)),$(this).val(f)}}var d,e={},f=$("body"),g="<a></a>",h="btn glyphicon",i={background:"whitesmoke",width:"100%",top:"0"};d=$("<div></div>").attr("id","paginator-navbar").css({width:"60px",position:"absolute",top:window.screen.height/2-35+"px",right:"40px","z-index":"999"}).appendTo(f),e.btnPrevious=$(g).attr("href","#").attr("title","Previous page").css($.extend(i,{"border-top-left-radius":"25%","border-top-right-radius":"25%","border-bottom-left-radius":"0","border-bottom-right-radius":"0"})).addClass(h+" glyphicon-chevron-up").click(function(){return b.gotoPrevious(),!1}).appendTo(d),e.inputRank=$("<input></input>").attr("type","number").attr("id","input-rank").css({width:"100%","line-height":"30px","text-align":"center"}).change(c).appendTo(d),setTimeout(function(){e.inputRank.val(b.getCurrentPage().rank)},500),e.btnNext=$(g).attr("href","#").attr("title","Next page").css($.extend(i,{width:"100%","border-top-left-radius":"0","border-top-right-radius":"0","border-bottom-left-radius":"25%","border-bottom-right-radius":"25%"})).addClass(h+" glyphicon-chevron-down").click(function(){return b.gotoNext(),!1}).appendTo(d)},c.removeNavigationButtons=function(){$("#paginator-navbar").remove()},c.updatePageRankInput=function(a){$("#input-rank").val(a)}},{"../classes/paginator/errors":6}]},{},[1]);